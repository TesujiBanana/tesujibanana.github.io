require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("react"),d=a("underscore"),e=c.createClass({displayName:"BoardLabelView",propTypes:{board_size:c.PropTypes.number.isRequired},render:function(){return c.DOM.div({className:"tesuji-labels"},d.times(this.props.board_size,function(a){var b="ABCDEFGHJKLMNOPQRST".charAt(a);return c.DOM.div({className:"label-top-"+a,key:a},b)}),d.times(this.props.board_size,function(a){var b="ABCDEFGHJKLMNOPQRST".charAt(a);return c.DOM.div({className:"label-bottom-"+a,key:a},b)}),d.times(this.props.board_size,function(a){return c.DOM.div({className:"label-left-"+a,key:a},a+1)}),d.times(this.props.board_size,function(a){return c.DOM.div({className:"label-right-"+a,key:a},a+1)}))}});b.exports=e},{react:"M6d2gk",underscore:"ZKusGn"}],2:[function(a,b){var c=a("react"),d=a("underscore"),e=a("../models/board.js"),f=a("./grid_view.jsx"),g=a("./board_label_view.jsx"),h=a("./intersection_view.jsx"),i=c.createClass({displayName:"BoardView",propTypes:{onIntersectionClick:c.PropTypes.func.isRequired,board:c.PropTypes.instanceOf(e).isRequired},render:function(){return c.DOM.div({className:"tesuji-board"},f({board_size:this.props.board.board_size}),g({board_size:this.props.board.board_size}),d.times(this.props.board.board_size*this.props.board.board_size,function(a){var b=a%this.props.board.board_size,c=(a-b)/this.props.board.board_size;return h({x:b,y:c,key:a,stone:this.props.board.stoneAt(b,c),onClick:this.props.onIntersectionClick})}.bind(this)))}});b.exports=i},{"../models/board.js":8,"./board_label_view.jsx":1,"./grid_view.jsx":3,"./intersection_view.jsx":4,react:"M6d2gk",underscore:"ZKusGn"}],3:[function(a,b){"use strict";var c=a("react"),d=a("underscore"),e=c.createClass({displayName:"GridView",propTypes:{board_size:c.PropTypes.number.isRequired},render:function(){return c.DOM.table(null,c.DOM.tbody(null,d.times(this.props.board_size-1,function(a){return c.DOM.tr({key:a},d.times(this.props.board_size-1,function(a){return c.DOM.td({key:a},"Â ")}))}.bind(this))))}});b.exports=e},{react:"M6d2gk",underscore:"ZKusGn"}],4:[function(a,b){"use strict";var c=a("react"),d=a("../models/stone.js"),e=c.createClass({displayName:"IntersectionView",dot:function(){return this.props.x%6===3&&this.props.y%6===3},onClick:function(a){this.props.onClick({x:this.props.x,y:this.props.y},a)},render:function(){var a=[];return this.dot()&&a.push(c.DOM.div({className:"dot",key:"dot"})),null!==this.props.stone&&a.push(f({stone:this.props.stone,key:"stone"})),c.DOM.div({className:"intersection intersection-"+this.props.x+"-"+this.props.y,onClick:this.onClick},a)}}),f=c.createClass({displayName:"StoneView",propTypes:{stone:c.PropTypes.instanceOf(d).isRequired},color:function(){return this.props.stone.color===d.BLACK?"black":this.props.stone.color===d.WHITE?"white":void 0},render:function(){return c.DOM.div({className:"stone "+this.color()})}});b.exports=e},{"../models/stone.js":10,react:"M6d2gk"}],uovHxG:[function(a,b){"use strict";var c=a("react"),d=(a("underscore"),a("../models/board.js")),e=a("../models/stone.js"),f=a("../models/game_state.js"),g=a("./board_view.jsx"),h=c.createClass({displayName:"TesujiApp",getInitialState:function(){return{game_state:new f({board:new d,current_turn:e.BLACK})}},handleClick:function(a){if(a){var b=a.x,c=a.y;if(void 0!==b&&void 0!==c){var d=this.state.game_state.playMove(b,c);d&&d.valid&&this.setState({game_state:d})}}},render:function(){return g({boardSize:"19",board:this.state.game_state.board,onIntersectionClick:this.handleClick})}});b.exports=h},{"../models/board.js":8,"../models/game_state.js":9,"../models/stone.js":10,"./board_view.jsx":2,react:"M6d2gk",underscore:"ZKusGn"}],tesuji_app:[function(a,b){b.exports=a("uovHxG")},{}],7:[function(a,b){var c=a("underscore"),d=function(a){this.attributes=void 0!==a?a:{},this.initialize.apply(this,arguments)};d.prototype.initialize=function(){},d.extend=function(a){var b,d=this,b=function(){return d.apply(this,arguments)};return c.extend(b,d),b.prototype=Object.create(d.prototype),Object.defineProperties(b.prototype,c.defaults(c.object(c.map(c.pairs(a.methods),function(a){return[a[0],{value:a[1],configurable:!0}]})),c.object(a.attributes,c.map(a.attributes,function(a){return{get:function(){return this.attributes[a]},set:function(b){this.attributes[a]=b},configurable:!0}})))),b},b.exports=d},{underscore:"ZKusGn"}],8:[function(a,b){var c=a("underscore"),d=a("../lib/model.js"),e=d.extend({attributes:["board_size","grid"],methods:{initialize:function(){void 0===this.board_size&&(this.board_size=19),void 0===this.grid&&(this.grid=Array.apply(null,Array(this.board_size*this.board_size)).map(function(){return null}))},_coordinatesToIndex:function(a,b){return a+this.board_size*b},coordinatesOutOfBounds:function(a,b){return 0>a||a>=this.board_size||0>b||b>=this.board_size},stoneAt:function(a,b){return this.coordinatesOutOfBounds(a,b)?void 0:this.grid[this._coordinatesToIndex(a,b)]},neighbors:function(a){return[this.stoneAt(a.x-1,a.y),this.stoneAt(a.x,a.y+1),this.stoneAt(a.x+1,a.y),this.stoneAt(a.x,a.y-1)]},placeStones:function(){args=c.flatten(arguments);var a=c.filter(args,function(a){return!this.coordinatesOutOfBounds(a.x,a.y)&&!this.stoneAt(a.x,a.y)}.bind(this));if(0===a.length)return null;var b=c.object(a.map(function(a){return this._coordinatesToIndex(a.x,a.y)}.bind(this)),a);return new e({board_size:this.board_size,grid:this.grid.map(function(a,c){return b[c]?b[c]:a})})},removeStones:function(){args=c.flatten(arguments);var a=c.filter(args,function(a){return!this.coordinatesOutOfBounds(a.x,a.y)&&a===this.stoneAt(a.x,a.y)}.bind(this));if(0===a.length)return this;var b=c.object(a.map(function(a){return this._coordinatesToIndex(a.x,a.y)}.bind(this)),a);return new e({board_size:this.board_size,grid:this.grid.map(function(a,c){return b[c]?null:a})})},findKills:function(a){return c.reduce(this.neighbors(a).filter(function(b){return b&&a.color!==b.color}),function(a,b){return c.contains(a,b)?a:a.concat(this.findDeadStones(b))}.bind(this),[])},findDeadStones:function(a){return function b(a,d,e){if(0===d.length)return e;var f=d[0],g=a.neighbors(f);return g.indexOf(null)>=0?[]:b(a,d.slice(1).concat(g.filter(function(a){return a&&f.color===a.color&&!c.contains(e,a)})),e.concat(f))}(this,[a],[])}}});b.exports=e},{"../lib/model.js":7,underscore:"ZKusGn"}],9:[function(a,b){var c=a("underscore"),d=a("../lib/model.js"),e=(a("./board.js"),a("./stone.js")),f=d.extend({attributes:["board","kills","current_turn","previous_game_state"],methods:{playMove:function(a,b){if(this.board.stoneAt(a,b))return null;var c=new e({x:a,y:b,color:this.current_turn}),d=this.board.placeStones(c),g=d.findKills(c);return d=d.removeStones(g),this.checkSuicide(d,c)?null:this.checkKo(d)?null:new f({board:d,kills:this.kills,current_turn:(this.current_turn+1)%2,previous_game_state:this})},checkSuicide:function(a,b){return a.findDeadStones(b).length>0},checkKo:function(a){for(var b=this;b;){if(c.all(c.zip(a.grid,b.board.grid),function(a){var b=a[0]?a[0].color:null,c=a[1]?a[1].color:null;return b===c}))return!0;b=b.previous_game_state}return!1},valid:function(){return!0}}});b.exports=f},{"../lib/model.js":7,"./board.js":8,"./stone.js":10,underscore:"ZKusGn"}],10:[function(a,b){var c=(a("underscore"),a("../lib/model.js")),d=c.extend({attributes:["x","y","color"]});d.BLACK=0,d.WHITE=1,b.exports=d},{"../lib/model.js":7,underscore:"ZKusGn"}]},{},["uovHxG"]);var React=require("react"),TesujiApp=require("tesuji_app");React.renderComponent(TesujiApp(),document.getElementById("tesuji_app"));