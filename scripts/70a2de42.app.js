require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e=typeof a;if("base64"===b&&"string"===e)for(a=C(a);a.length%4!==0;)a+="=";var f;if("number"===e)f=E(a);else if("string"===e)f=d.byteLength(a,b);else{if("object"!==e)throw new Error("First argument needs to be a number, array or string.");f=E(a.length)}var g;d._useTypedArrays?g=d._augment(new Uint8Array(f)):(g=this,g.length=f,g._isBuffer=!0);var h;if(d._useTypedArrays&&"number"==typeof a.byteLength)g._set(a);else if(G(a))for(h=0;f>h;h++)g[h]=d.isBuffer(a)?a.readUInt8(h):a[h];else if("string"===e)g.write(a,0,b);else if("number"===e&&!d._useTypedArrays&&!c)for(h=0;f>h;h++)g[h]=0;return g}function e(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;R(f%2===0,"Invalid hex string"),d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);R(!isNaN(h),"Invalid hex string"),a[c+g]=h}return g}function f(a,b,c,d){var e=M(I(b),a,c,d);return e}function g(a,b,c,d){var e=M(J(b),a,c,d);return e}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,d){var e=M(L(b),a,c,d);return e}function j(a,b,c,d){var e=M(K(b),a,c,d);return e}function k(a,b,c){return S.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=N(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+N(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=H(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(R("boolean"==typeof c,"missing or invalid endian"),R(b+3<a.length,"Trying to read beyond buffer length")),T.read(a,b,c,23,4)}function v(a,b,c,d){return d||(R("boolean"==typeof c,"missing or invalid endian"),R(b+7<a.length,"Trying to read beyond buffer length")),T.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+1<a.length,"trying to write beyond buffer length"),O(b,65535));var f=a.length;if(!(c>=f)){for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g);return c+2}}function x(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"trying to write beyond buffer length"),O(b,4294967295));var f=a.length;if(!(c>=f)){for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255;return c+4}}function y(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+1<a.length,"Trying to write beyond buffer length"),P(b,32767,-32768));var f=a.length;if(!(c>=f))return b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e),c+2}function z(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"Trying to write beyond buffer length"),P(b,2147483647,-2147483648));var f=a.length;if(!(c>=f))return b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e),c+4}function A(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"Trying to write beyond buffer length"),Q(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;if(!(c>=f))return T.write(a,b,c,d,23,4),c+4}function B(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+7<a.length,"Trying to write beyond buffer length"),Q(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;if(!(c>=f))return T.write(a,b,c,d,52,8),c+8}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function D(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function E(a){return a=~~Math.ceil(+a),0>a?0:a}function F(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function G(a){return F(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function H(a){return 16>a?"0"+a.toString(16):a.toString(16)}function I(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(d);else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function J(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function K(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function L(a){return S.toByteArray(a)}function M(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function N(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function O(a,b){R("number"==typeof a,"cannot write a non-number as a number"),R(a>=0,"specified a negative value for writing an unsigned value"),R(b>=a,"value is larger than maximum value for type"),R(Math.floor(a)===a,"value has a fractional component")}function P(a,b,c){R("number"==typeof a,"cannot write a non-number as a number"),R(b>=a,"value larger than maximum allowed value"),R(a>=c,"value smaller than minimum allowed value"),R(Math.floor(a)===a,"value has a fractional component")}function Q(a,b,c){R("number"==typeof a,"cannot write a non-number as a number"),R(b>=a,"value larger than maximum allowed value"),R(a>=c,"value smaller than minimum allowed value")}function R(a,b){if(!a)throw new Error(b||"Failed assertion")}var S=a("base64-js"),T=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192,d._useTypedArrays=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray}catch(c){return!1}}(),d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a=a.toString(),b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=I(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=L(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(R(F(a),"Usage: Buffer.concat(list[, length])"),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.compare=function(a,b){R(d.isBuffer(a)&&d.isBuffer(b),"Arguments must be Buffers");for(var c=a.length,e=b.length,f=0,g=Math.min(c,e);g>f&&a[f]===b[f];f++);return f!==g&&(c=a[f],e=b[f]),e>c?-1:c>e?1:0},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0===c?d.length:Number(c),c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.equals=function(a){return R(d.isBuffer(a),"Argument must be a Buffer"),0===d.compare(this,a)},d.prototype.compare=function(a){return R(d.isBuffer(a),"Argument must be a Buffer"),d.compare(this,a)},d.prototype.copy=function(a,b,c,e){var f=this;if(c||(c=0),e||0===e||(e=this.length),b||(b=0),e!==c&&0!==a.length&&0!==f.length){R(e>=c,"sourceEnd < sourceStart"),R(b>=0&&b<a.length,"targetStart out of bounds"),R(c>=0&&c<f.length,"sourceStart out of bounds"),R(e>=0&&e<=f.length,"sourceEnd out of bounds"),e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c);var g=e-c;if(100>g||!d._useTypedArrays)for(var h=0;g>h;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b)}},d.prototype.slice=function(a,b){var c=this.length;if(a=D(a,c,0),b=D(b,c,c),d._useTypedArrays)return d._augment(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(R(void 0!==a&&null!==a,"missing offset"),R(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(R(void 0!==a&&null!==a,"missing offset"),R(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){return c||(R(void 0!==a&&null!==a,"missing value"),R(void 0!==b&&null!==b,"missing offset"),R(b<this.length,"trying to write beyond buffer length"),O(a,255)),b>=this.length?void 0:(this[b]=a,b+1)},d.prototype.writeUInt16LE=function(a,b,c){return w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){return w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){return x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){return x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){return c||(R(void 0!==a&&null!==a,"missing value"),R(void 0!==b&&null!==b,"missing offset"),R(b<this.length,"Trying to write beyond buffer length"),P(a,127,-128)),b>=this.length?void 0:(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c),b+1)},d.prototype.writeInt16LE=function(a,b,c){return y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){return y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){return z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){return z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){return A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){return A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){return B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){return B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),R(c>=b,"end < start"),c!==b&&0!==this.length){R(b>=0&&b<this.length,"start out of bounds"),R(c>=0&&c<=this.length,"end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=I(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=H(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(d._useTypedArrays)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var U=d.prototype;d._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=U.get,a.set=U.set,a.write=U.write,a.toString=U.toString,a.toLocaleString=U.toString,a.toJSON=U.toJSON,a.equals=U.equals,a.compare=U.compare,a.copy=U.copy,a.slice=U.slice,a.readUInt8=U.readUInt8,a.readUInt16LE=U.readUInt16LE,a.readUInt16BE=U.readUInt16BE,a.readUInt32LE=U.readUInt32LE,a.readUInt32BE=U.readUInt32BE,a.readInt8=U.readInt8,a.readInt16LE=U.readInt16LE,a.readInt16BE=U.readInt16BE,a.readInt32LE=U.readInt32LE,a.readInt32BE=U.readInt32BE,a.readFloatLE=U.readFloatLE,a.readFloatBE=U.readFloatBE,a.readDoubleLE=U.readDoubleLE,a.readDoubleBE=U.readDoubleBE,a.writeUInt8=U.writeUInt8,a.writeUInt16LE=U.writeUInt16LE,a.writeUInt16BE=U.writeUInt16BE,a.writeUInt32LE=U.writeUInt32LE,a.writeUInt32BE=U.writeUInt32BE,a.writeInt8=U.writeInt8,a.writeInt16LE=U.writeInt16LE,a.writeInt16BE=U.writeInt16BE,a.writeInt32LE=U.writeInt32LE,a.writeInt32BE=U.writeInt32BE,a.writeFloatLE=U.writeFloatLE,a.writeFloatBE=U.writeFloatBE,a.writeDoubleLE=U.writeDoubleLE,a.writeDoubleBE=U.writeDoubleBE,a.fill=U.fill,a.inspect=U.inspect,a.toArrayBuffer=U.toArrayBuffer,a}},{"base64-js":2,ieee754:3}],2:[function(a,b){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function a(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function d(b){function c(a){j[l++]=a}var d,e,g,h,i,j;if(b.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=b.length;i="="===b.charAt(k-2)?2:"="===b.charAt(k-1)?1:0,j=new f(3*b.length/4-i),g=i>0?b.length-4:b.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=a(b.charAt(d))<<18|a(b.charAt(d+1))<<12|a(b.charAt(d+2))<<6|a(b.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=a(b.charAt(d))<<2|a(b.charAt(d+1))>>4,c(255&h)):1===i&&(h=a(b.charAt(d))<<10|a(b.charAt(d+1))<<4|a(b.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return c.charAt(a)}function d(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=d(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g=("0".charCodeAt(0),"+".charCodeAt(0)),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);b.exports.toByteArray=d,b.exports.fromByteArray=e}()},{}],3:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],4:[function(a,b){function c(a,b){if(a.length%g!==0){var c=a.length+(g-a.length%g);a=f.concat([a,h],c)}for(var d=[],e=b?a.readInt32BE:a.readInt32LE,i=0;i<a.length;i+=g)d.push(e.call(a,i));return d}function d(a,b,c){for(var d=new f(b),e=c?d.writeInt32BE:d.writeInt32LE,g=0;g<a.length;g++)e.call(d,a[g],4*g,!0);return d}function e(a,b,e,g){f.isBuffer(a)||(a=new f(a));var h=b(c(a,g),a.length*i);return d(h,e,g)}var f=a("buffer").Buffer,g=4,h=new f(g);h.fill(0);var i=8;b.exports={hash:e}},{buffer:1}],5:[function(a,b,c){function d(a,b,c){h.isBuffer(b)||(b=new h(b)),h.isBuffer(c)||(c=new h(c)),b.length>n?b=a(b):b.length<n&&(b=h.concat([b,o],n));for(var d=new h(n),e=new h(n),f=0;n>f;f++)d[f]=54^b[f],e[f]=92^b[f];var g=a(h.concat([d,c]));return a(h.concat([e,g]))}function e(a,b){a=a||"sha1";var c=m[a],e=[],g=0;return c||f("algorithm:",a,"is not yet supported"),{update:function(a){return h.isBuffer(a)||(a=new h(a)),e.push(a),g+=a.length,this},digest:function(a){var f=h.concat(e),g=b?d(c,b,f):c(f);return e=null,a?g.toString(a):g}}}function f(){var a=[].slice.call(arguments).join(" ");throw new Error([a,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function g(a,b){for(var c in a)b(a[c],c)}var h=a("buffer").Buffer,i=a("./sha"),j=a("./sha256"),k=a("./rng"),l=a("./md5"),m={sha1:i,sha256:j,md5:l},n=64,o=new h(n);o.fill(0),c.createHash=function(a){return e(a)},c.createHmac=function(a,b){return e(a,b)},c.randomBytes=function(a,b){if(!b||!b.call)return new h(k(a));try{b.call(this,void 0,new h(k(a)))}catch(c){b(c)}},g(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(a){c[a]=function(){f("sorry,",a,"is not implemented yet")}})},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:1}],6:[function(a,b){function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=j,p=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,o),k=i(k,p)}return Array(c,d,j,k)}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}var k=a("./helpers");b.exports=function(a){return k.hash(a,c,16)}},{"./helpers":4}],7:[function(a,b){!function(){var a,c,d=this;a=function(a){for(var b,b,c=new Array(a),d=0;a>d;d++)0==(3&d)&&(b=4294967296*Math.random()),c[d]=b>>>((3&d)<<3)&255;return c},d.crypto&&crypto.getRandomValues&&(c=function(a){var b=new Uint8Array(a);return crypto.getRandomValues(b),b}),b.exports=c||a}()},{}],8:[function(a,b){function c(a,b){a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;for(var c=Array(80),h=1732584193,i=-271733879,j=-1732584194,k=271733878,l=-1009589776,m=0;m<a.length;m+=16){for(var n=h,o=i,p=j,q=k,r=l,s=0;80>s;s++){c[s]=16>s?a[m+s]:g(c[s-3]^c[s-8]^c[s-14]^c[s-16],1);var t=f(f(g(h,5),d(s,i,j,k)),f(f(l,c[s]),e(s)));l=k,k=j,j=g(i,30),i=h,h=t}h=f(h,n),i=f(i,o),j=f(j,p),k=f(k,q),l=f(l,r)}return Array(h,i,j,k,l)}function d(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d}function e(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function f(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function g(a,b){return a<<b|a>>>32-b}var h=a("./helpers");b.exports=function(a){return h.hash(a,c,20,!0)}},{"./helpers":4}],9:[function(a,b){var c=a("./helpers"),d=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},e=function(a,b){return a>>>b|a<<32-b},f=function(a,b){return a>>>b},g=function(a,b,c){return a&b^~a&c},h=function(a,b,c){return a&b^a&c^b&c},i=function(a){return e(a,2)^e(a,13)^e(a,22)},j=function(a){return e(a,6)^e(a,11)^e(a,25)},k=function(a){return e(a,7)^e(a,18)^f(a,3)},l=function(a){return e(a,17)^e(a,19)^f(a,10)},m=function(a,b){var c,e,f,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;for(var r=0;r<a.length;r+=16){c=w[0],e=w[1],f=w[2],m=w[3],n=w[4],o=w[5],p=w[6],q=w[7];for(var s=0;64>s;s++)x[s]=16>s?a[s+r]:d(d(d(l(x[s-2]),x[s-7]),k(x[s-15])),x[s-16]),t=d(d(d(d(q,j(n)),g(n,o,p)),v[s]),x[s]),u=d(i(c),h(c,e,f)),q=p,p=o,o=n,n=d(m,t),m=f,f=e,e=c,c=d(t,u);w[0]=d(c,w[0]),w[1]=d(e,w[1]),w[2]=d(f,w[2]),w[3]=d(m,w[3]),w[4]=d(n,w[4]),w[5]=d(o,w[5]),w[6]=d(p,w[6]),w[7]=d(q,w[7])}return w};b.exports=function(a){return c.hash(a,m,32,!0)}},{"./helpers":4}],10:[function(a,b){var c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(a){if(null==a)return"";var b,d,e,f,g,h,i,j="",k=0;for(a=c.compress(a);k<2*a.length;)k%2==0?(b=a.charCodeAt(k/2)>>8,d=255&a.charCodeAt(k/2),e=k/2+1<a.length?a.charCodeAt(k/2+1)>>8:0/0):(b=255&a.charCodeAt((k-1)/2),(k+1)/2<a.length?(d=a.charCodeAt((k+1)/2)>>8,e=255&a.charCodeAt((k+1)/2)):d=e=0/0),k+=3,f=b>>2,g=(3&b)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+c._keyStr.charAt(f)+c._keyStr.charAt(g)+c._keyStr.charAt(h)+c._keyStr.charAt(i);return j},decompressFromBase64:function(a){if(null==a)return"";var b,d,e,f,g,h,i,j,k="",l=0,m=0,n=c._f;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");m<a.length;)g=c._keyStr.indexOf(a.charAt(m++)),h=c._keyStr.indexOf(a.charAt(m++)),i=c._keyStr.indexOf(a.charAt(m++)),j=c._keyStr.indexOf(a.charAt(m++)),d=g<<2|h>>4,e=(15&h)<<4|i>>2,f=(3&i)<<6|j,l%2==0?(b=d<<8,64!=i&&(k+=n(b|e)),64!=j&&(b=f<<8)):(k+=n(b|d),64!=i&&(b=e<<8),64!=j&&(k+=n(b|f))),l+=3;return c.decompress(k)},compressToUTF16:function(a){if(null==a)return"";var b,d,e,f="",g=0,h=c._f;for(a=c.compress(a),b=0;b<a.length;b++)switch(d=a.charCodeAt(b),g++){case 0:f+=h((d>>1)+32),e=(1&d)<<14;break;case 1:f+=h(e+(d>>2)+32),e=(3&d)<<13;break;case 2:f+=h(e+(d>>3)+32),e=(7&d)<<12;break;case 3:f+=h(e+(d>>4)+32),e=(15&d)<<11;break;case 4:f+=h(e+(d>>5)+32),e=(31&d)<<10;break;case 5:f+=h(e+(d>>6)+32),e=(63&d)<<9;break;case 6:f+=h(e+(d>>7)+32),e=(127&d)<<8;break;case 7:f+=h(e+(d>>8)+32),e=(255&d)<<7;break;case 8:f+=h(e+(d>>9)+32),e=(511&d)<<6;break;case 9:f+=h(e+(d>>10)+32),e=(1023&d)<<5;break;case 10:f+=h(e+(d>>11)+32),e=(2047&d)<<4;break;case 11:f+=h(e+(d>>12)+32),e=(4095&d)<<3;break;case 12:f+=h(e+(d>>13)+32),e=(8191&d)<<2;break;case 13:f+=h(e+(d>>14)+32),e=(16383&d)<<1;break;case 14:f+=h(e+(d>>15)+32,(32767&d)+32),g=0}return f+h(e+32)},decompressFromUTF16:function(a){if(null==a)return"";for(var b,d,e="",f=0,g=0,h=c._f;g<a.length;){switch(d=a.charCodeAt(g)-32,f++){case 0:b=d<<1;break;case 1:e+=h(b|d>>14),b=(16383&d)<<2;break;case 2:e+=h(b|d>>13),b=(8191&d)<<3;break;case 3:e+=h(b|d>>12),b=(4095&d)<<4;break;case 4:e+=h(b|d>>11),b=(2047&d)<<5;break;case 5:e+=h(b|d>>10),b=(1023&d)<<6;break;case 6:e+=h(b|d>>9),b=(511&d)<<7;break;case 7:e+=h(b|d>>8),b=(255&d)<<8;break;case 8:e+=h(b|d>>7),b=(127&d)<<9;break;case 9:e+=h(b|d>>6),b=(63&d)<<10;break;case 10:e+=h(b|d>>5),b=(31&d)<<11;break;case 11:e+=h(b|d>>4),b=(15&d)<<12;break;case 12:e+=h(b|d>>3),b=(7&d)<<13;break;case 13:e+=h(b|d>>2),b=(3&d)<<14;break;case 14:e+=h(b|d>>1),b=(1&d)<<15;break;case 15:e+=h(b|d),f=0}g++}return c.decompress(e)},compress:function(a){if(null==a)return"";var b,d,e,f={},g={},h="",i="",j="",k=2,l=3,m=2,n="",o=0,p=0,q=c._f;for(e=0;e<a.length;e+=1)if(h=a.charAt(e),Object.prototype.hasOwnProperty.call(f,h)||(f[h]=l++,g[h]=!0),i=j+h,Object.prototype.hasOwnProperty.call(f,i))j=i;else{if(Object.prototype.hasOwnProperty.call(g,j)){if(j.charCodeAt(0)<256){for(b=0;m>b;b++)o<<=1,15==p?(p=0,n+=q(o),o=0):p++;for(d=j.charCodeAt(0),b=0;8>b;b++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}else{for(d=1,b=0;m>b;b++)o=o<<1|d,15==p?(p=0,n+=q(o),o=0):p++,d=0;for(d=j.charCodeAt(0),b=0;16>b;b++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}k--,0==k&&(k=Math.pow(2,m),m++),delete g[j]}else for(d=f[j],b=0;m>b;b++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1;k--,0==k&&(k=Math.pow(2,m),m++),f[i]=l++,j=String(h)}if(""!==j){if(Object.prototype.hasOwnProperty.call(g,j)){if(j.charCodeAt(0)<256){for(b=0;m>b;b++)o<<=1,15==p?(p=0,n+=q(o),o=0):p++;for(d=j.charCodeAt(0),b=0;8>b;b++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}else{for(d=1,b=0;m>b;b++)o=o<<1|d,15==p?(p=0,n+=q(o),o=0):p++,d=0;for(d=j.charCodeAt(0),b=0;16>b;b++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}k--,0==k&&(k=Math.pow(2,m),m++),delete g[j]}else for(d=f[j],b=0;m>b;b++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1;k--,0==k&&(k=Math.pow(2,m),m++)}for(d=2,b=0;m>b;b++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1;for(;;){if(o<<=1,15==p){n+=q(o);break}p++}return n},decompress:function(a){if(null==a)return"";if(""==a)return null;var b,d,e,f,g,h,i,j,k=[],l=4,m=4,n=3,o="",p="",q=c._f,r={string:a,val:a.charCodeAt(0),position:32768,index:1};for(d=0;3>d;d+=1)k[d]=d;for(f=0,h=Math.pow(2,2),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;switch(b=f){case 0:for(f=0,h=Math.pow(2,8),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;j=q(f);break;case 1:for(f=0,h=Math.pow(2,16),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;j=q(f);break;case 2:return""}for(k[3]=j,e=p=j;;){if(r.index>r.string.length)return"";for(f=0,h=Math.pow(2,n),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;switch(j=f){case 0:for(f=0,h=Math.pow(2,8),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;k[m++]=q(f),j=m-1,l--;break;case 1:for(f=0,h=Math.pow(2,16),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;k[m++]=q(f),j=m-1,l--;break;case 2:return p}if(0==l&&(l=Math.pow(2,n),n++),k[j])o=k[j];else{if(j!==m)return null;o=e+e.charAt(0)}p+=o,k[m++]=e+o.charAt(0),l--,e=o,0==l&&(l=Math.pow(2,n),n++)}}};"undefined"!=typeof b&&null!=b&&(b.exports=c)},{}],11:[function(a,b){"use strict";function c(a){throw a}function d(a,b,d){4!==b.length&&c(new m.exception.invalid("invalid aes block size"));var e=a.b[d],f=b[0]^e[0],g=b[d?3:1]^e[1],h=b[2]^e[2];b=b[d?1:3]^e[3];var i,j,k,l,n=e.length/4-2,o=4,p=[0,0,0,0];i=a.k[d],a=i[0];var q=i[1],r=i[2],s=i[3],t=i[4];for(l=0;n>l;l++)i=a[f>>>24]^q[g>>16&255]^r[h>>8&255]^s[255&b]^e[o],j=a[g>>>24]^q[h>>16&255]^r[b>>8&255]^s[255&f]^e[o+1],k=a[h>>>24]^q[b>>16&255]^r[f>>8&255]^s[255&g]^e[o+2],b=a[b>>>24]^q[f>>16&255]^r[g>>8&255]^s[255&h]^e[o+3],o+=4,f=i,g=j,h=k;for(l=0;4>l;l++)p[d?3&-l:l]=t[f>>>24]<<24^t[g>>16&255]<<16^t[h>>8&255]<<8^t[255&b]^e[o++],i=f,f=g,g=h,h=b,b=i;return p}function e(a,b){var c,d,e,f=b.slice(0),g=a.r,h=a.b,i=g[0],j=g[1],k=g[2],l=g[3],m=g[4],n=g[5],o=g[6],p=g[7];for(c=0;64>c;c++)16>c?d=f[c]:(d=f[c+1&15],e=f[c+14&15],d=f[15&c]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+f[15&c]+f[c+9&15]|0),d=d+p+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(o^m&(n^o))+h[c],p=o,o=n,n=m,m=l+d|0,l=k,k=j,j=i,i=d+(j&k^l&(j^k))+(j>>>2^j>>>13^j>>>22^j<<30^j<<19^j<<10)|0;
g[0]=g[0]+i|0,g[1]=g[1]+j|0,g[2]=g[2]+k|0,g[3]=g[3]+l|0,g[4]=g[4]+m|0,g[5]=g[5]+n|0,g[6]=g[6]+o|0,g[7]=g[7]+p|0}function f(a,b){var c,d=m.random.w[a],e=[];for(c in d)d.hasOwnProperty(c)&&e.push(d[c]);for(c=0;c<e.length;c++)e[c](b)}function g(a){window&&window.performance&&"function"==typeof window.performance.now?m.random.addEntropy(window.performance.now(),a,"loadtime"):m.random.addEntropy((new Date).valueOf(),a,"loadtime")}function h(a){a.b=i(a).concat(i(a)),a.A=new m.cipher.aes(a.b)}function i(a){for(var b=0;4>b&&(a.f[b]=a.f[b]+1|0,!a.f[b]);b++);return a.A.encrypt(a.f)}function j(a,b){return function(){b.apply(a,arguments)}}var k=void 0,l=!1,m={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return"CORRUPT: "+this.message},this.message=a},invalid:function(a){this.toString=function(){return"INVALID: "+this.message},this.message=a},bug:function(a){this.toString=function(){return"BUG: "+this.message},this.message=a},notReady:function(a){this.toString=function(){return"NOT READY: "+this.message},this.message=a}}};"undefined"!=typeof b&&b.exports&&(b.exports=m),m.cipher.aes=function(a){this.k[0][0][0]||this.D();var b,d,e,f,g=this.k[0][4],h=this.k[1];b=a.length;var i=1;for(4!==b&&6!==b&&8!==b&&c(new m.exception.invalid("invalid aes key size")),this.b=[e=a.slice(0),f=[]],a=b;4*b+28>a;a++)d=e[a-1],(0===a%b||8===b&&4===a%b)&&(d=g[d>>>24]<<24^g[d>>16&255]<<16^g[d>>8&255]<<8^g[255&d],0===a%b&&(d=d<<8^d>>>24^i<<24,i=i<<1^283*(i>>7))),e[a]=e[a-b]^d;for(b=0;a;b++,a--)d=e[3&b?a:a-4],f[b]=4>=a||4>b?d:h[0][g[d>>>24]]^h[1][g[d>>16&255]]^h[2][g[d>>8&255]]^h[3][g[255&d]]},m.cipher.aes.prototype={encrypt:function(a){return d(this,a,0)},decrypt:function(a){return d(this,a,1)},k:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){var a,b,c,d,e,f,g,h=this.k[0],i=this.k[1],j=h[4],k=i[4],l=[],m=[];for(a=0;256>a;a++)m[(l[a]=a<<1^283*(a>>7))^a]=a;for(b=c=0;!j[b];b^=d||1,c=m[c]||1)for(f=c^c<<1^c<<2^c<<3^c<<4,f=f>>8^255&f^99,j[b]=f,k[f]=b,e=l[a=l[d=l[b]]],g=16843009*e^65537*a^257*d^16843008*b,e=257*l[f]^16843008*f,a=0;4>a;a++)h[a][b]=e=e<<24^e>>>8,i[a][f]=g=g<<24^g>>>8;for(a=0;5>a;a++)h[a]=h[a].slice(0),i[a]=i[a].slice(0)}},m.bitArray={bitSlice:function(a,b,c){return a=m.bitArray.P(a.slice(b/32),32-(31&b)).slice(1),c===k?a:m.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d=Math.floor(-b-c&31);return(-32&(b+c-1^b)?a[b/32|0]<<32-d^a[b/32+1|0]>>>d:a[b/32|0]>>>d)&(1<<c)-1},concat:function(a,b){if(0===a.length||0===b.length)return a.concat(b);var c=a[a.length-1],d=m.bitArray.getPartial(c);return 32===d?a.concat(b):m.bitArray.P(b,d,0|c,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length;return 0===b?0:32*(b-1)+m.bitArray.getPartial(a[b-1])},clamp:function(a,b){if(32*a.length<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;return b&=31,c>0&&b&&(a[c-1]=m.bitArray.partial(b,a[c-1]&2147483648>>b-1,1)),a},partial:function(a,b,c){return 32===a?b:(c?0|b:b<<32-a)+1099511627776*a},getPartial:function(a){return Math.round(a/1099511627776)||32},equal:function(a,b){if(m.bitArray.bitLength(a)!==m.bitArray.bitLength(b))return l;var c,d=0;for(c=0;c<a.length;c++)d|=a[c]^b[c];return 0===d},P:function(a,b,c,d){var e;for(e=0,d===k&&(d=[]);b>=32;b-=32)d.push(c),c=0;if(0===b)return d.concat(a);for(e=0;e<a.length;e++)d.push(c|a[e]>>>b),c=a[e]<<32-b;return e=a.length?a[a.length-1]:0,a=m.bitArray.getPartial(e),d.push(m.bitArray.partial(b+a&31,b+a>32?c:d.pop(),1)),d},l:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}},m.codec.utf8String={fromBits:function(a){var b,c,d="",e=m.bitArray.bitLength(a);for(b=0;e/8>b;b++)0===(3&b)&&(c=a[b/4]),d+=String.fromCharCode(c>>>24),c<<=8;return decodeURIComponent(escape(d))},toBits:function(a){a=unescape(encodeURIComponent(a));var b,c=[],d=0;for(b=0;b<a.length;b++)d=d<<8|a.charCodeAt(b),3===(3&b)&&(c.push(d),d=0);return 3&b&&c.push(m.bitArray.partial(8*(3&b),d)),c}},m.codec.hex={fromBits:function(a){var b,c="";for(b=0;b<a.length;b++)c+=((0|a[b])+0xf00000000000).toString(16).substr(4);return c.substr(0,m.bitArray.bitLength(a)/4)},toBits:function(a){var b,c,d=[];for(a=a.replace(/\s|0x/g,""),c=a.length,a+="00000000",b=0;b<a.length;b+=8)d.push(0^parseInt(a.substr(b,8),16));return m.bitArray.clamp(d,4*c)}},m.codec.base64={J:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(a,b,c){var d="",e=0,f=m.codec.base64.J,g=0,h=m.bitArray.bitLength(a);for(c&&(f=f.substr(0,62)+"-_"),c=0;6*d.length<h;)d+=f.charAt((g^a[c]>>>e)>>>26),6>e?(g=a[c]<<6-e,e+=26,c++):(g<<=6,e-=6);for(;3&d.length&&!b;)d+="=";return d},toBits:function(a,b){a=a.replace(/\s|=/g,"");var d,e,f=[],g=0,h=m.codec.base64.J,i=0;for(b&&(h=h.substr(0,62)+"-_"),d=0;d<a.length;d++)e=h.indexOf(a.charAt(d)),0>e&&c(new m.exception.invalid("this isn't base64!")),g>26?(g-=26,f.push(i^e>>>g),i=e<<32-g):(g+=6,i^=e<<32-g);return 56&g&&f.push(m.bitArray.partial(56&g,i,1)),f}},m.codec.base64url={fromBits:function(a){return m.codec.base64.fromBits(a,1,1)},toBits:function(a){return m.codec.base64.toBits(a,1)}},m.hash.sha256=function(a){this.b[0]||this.D(),a?(this.r=a.r.slice(0),this.o=a.o.slice(0),this.h=a.h):this.reset()},m.hash.sha256.hash=function(a){return(new m.hash.sha256).update(a).finalize()},m.hash.sha256.prototype={blockSize:512,reset:function(){return this.r=this.N.slice(0),this.o=[],this.h=0,this},update:function(a){"string"==typeof a&&(a=m.codec.utf8String.toBits(a));var b,c=this.o=m.bitArray.concat(this.o,a);for(b=this.h,a=this.h=b+m.bitArray.bitLength(a),b=512+b&-512;a>=b;b+=512)e(this,c.splice(0,16));return this},finalize:function(){var a,b=this.o,c=this.r,b=m.bitArray.concat(b,[m.bitArray.partial(1,1)]);for(a=b.length+2;15&a;a++)b.push(0);for(b.push(Math.floor(this.h/4294967296)),b.push(0|this.h);b.length;)e(this,b.splice(0,16));return this.reset(),c},N:[],b:[],D:function(){function a(a){return 4294967296*(a-Math.floor(a))|0}var b,c=0,d=2;a:for(;64>c;d++){for(b=2;d>=b*b;b++)if(0===d%b)continue a;8>c&&(this.N[c]=a(Math.pow(d,.5))),this.b[c]=a(Math.pow(d,1/3)),c++}}},m.mode.ccm={name:"ccm",encrypt:function(a,b,d,e,f){var g,h=b.slice(0),i=m.bitArray,j=i.bitLength(d)/8,k=i.bitLength(h)/8;for(f=f||64,e=e||[],7>j&&c(new m.exception.invalid("ccm: iv must be at least 7 bytes")),g=2;4>g&&k>>>8*g;g++);return 15-j>g&&(g=15-j),d=i.clamp(d,8*(15-g)),b=m.mode.ccm.L(a,b,d,e,f,g),h=m.mode.ccm.p(a,h,d,b,f,g),i.concat(h.data,h.tag)},decrypt:function(a,b,d,e,f){f=f||64,e=e||[];var g=m.bitArray,h=g.bitLength(d)/8,i=g.bitLength(b),j=g.clamp(b,i-f),k=g.bitSlice(b,i-f),i=(i-f)/8;for(7>h&&c(new m.exception.invalid("ccm: iv must be at least 7 bytes")),b=2;4>b&&i>>>8*b;b++);return 15-h>b&&(b=15-h),d=g.clamp(d,8*(15-b)),j=m.mode.ccm.p(a,j,d,k,f,b),a=m.mode.ccm.L(a,j.data,d,e,f,b),g.equal(j.tag,a)||c(new m.exception.corrupt("ccm: tag doesn't match")),j.data},L:function(a,b,d,e,f,g){var h=[],i=m.bitArray,j=i.l;if(f/=8,(f%2||4>f||f>16)&&c(new m.exception.invalid("ccm: invalid tag length")),(4294967295<e.length||4294967295<b.length)&&c(new m.exception.bug("ccm: can't deal with 4GiB or more data")),g=[i.partial(8,(e.length?64:0)|f-2<<2|g-1)],g=i.concat(g,d),g[3]|=i.bitLength(b)/8,g=a.encrypt(g),e.length)for(d=i.bitLength(e)/8,65279>=d?h=[i.partial(16,d)]:4294967295>=d&&(h=i.concat([i.partial(16,65534)],[d])),h=i.concat(h,e),e=0;e<h.length;e+=4)g=a.encrypt(j(g,h.slice(e,e+4).concat([0,0,0])));for(e=0;e<b.length;e+=4)g=a.encrypt(j(g,b.slice(e,e+4).concat([0,0,0])));return i.clamp(g,8*f)},p:function(a,b,c,d,e,f){var g,h=m.bitArray;g=h.l;var i=b.length,j=h.bitLength(b);if(c=h.concat([h.partial(8,f-1)],c).concat([0,0,0]).slice(0,4),d=h.bitSlice(g(d,a.encrypt(c)),0,e),!i)return{tag:d,data:[]};for(g=0;i>g;g+=4)c[3]++,e=a.encrypt(c),b[g]^=e[0],b[g+1]^=e[1],b[g+2]^=e[2],b[g+3]^=e[3];return{tag:d,data:h.clamp(b,j)}}},m.mode.ocb2={name:"ocb2",encrypt:function(a,b,d,e,f,g){128!==m.bitArray.bitLength(d)&&c(new m.exception.invalid("ocb iv must be 128 bits"));var h,i=m.mode.ocb2.H,j=m.bitArray,k=j.l,l=[0,0,0,0];d=i(a.encrypt(d));var n,o=[];for(e=e||[],f=f||64,h=0;h+4<b.length;h+=4)n=b.slice(h,h+4),l=k(l,n),o=o.concat(k(d,a.encrypt(k(d,n)))),d=i(d);return n=b.slice(h),b=j.bitLength(n),h=a.encrypt(k(d,[0,0,0,b])),n=j.clamp(k(n.concat([0,0,0]),h),b),l=k(l,k(n.concat([0,0,0]),h)),l=a.encrypt(k(l,k(d,i(d)))),e.length&&(l=k(l,g?e:m.mode.ocb2.pmac(a,e))),o.concat(j.concat(n,j.clamp(l,f)))},decrypt:function(a,b,d,e,f,g){128!==m.bitArray.bitLength(d)&&c(new m.exception.invalid("ocb iv must be 128 bits")),f=f||64;var h,i,j=m.mode.ocb2.H,k=m.bitArray,l=k.l,n=[0,0,0,0],o=j(a.encrypt(d)),p=m.bitArray.bitLength(b)-f,q=[];for(e=e||[],d=0;p/32>d+4;d+=4)h=l(o,a.decrypt(l(o,b.slice(d,d+4)))),n=l(n,h),q=q.concat(h),o=j(o);return i=p-32*d,h=a.encrypt(l(o,[0,0,0,i])),h=l(h,k.clamp(b.slice(d),i).concat([0,0,0])),n=l(n,h),n=a.encrypt(l(n,l(o,j(o)))),e.length&&(n=l(n,g?e:m.mode.ocb2.pmac(a,e))),k.equal(k.clamp(n,f),k.bitSlice(b,p))||c(new m.exception.corrupt("ocb: tag doesn't match")),q.concat(k.clamp(h,i))},pmac:function(a,b){var c,d=m.mode.ocb2.H,e=m.bitArray,f=e.l,g=[0,0,0,0],h=a.encrypt([0,0,0,0]),h=f(h,d(d(h)));for(c=0;c+4<b.length;c+=4)h=d(h),g=f(g,a.encrypt(f(h,b.slice(c,c+4))));return c=b.slice(c),128>e.bitLength(c)&&(h=f(h,d(h)),c=e.concat(c,[-2147483648,0,0,0])),g=f(g,c),a.encrypt(f(d(f(h,d(h))),g))},H:function(a){return[a[0]<<1^a[1]>>>31,a[1]<<1^a[2]>>>31,a[2]<<1^a[3]>>>31,a[3]<<1^135*(a[0]>>>31)]}},m.mode.gcm={name:"gcm",encrypt:function(a,b,c,d,e){var f=b.slice(0);return b=m.bitArray,d=d||[],a=m.mode.gcm.p(!0,a,f,d,c,e||128),b.concat(a.data,a.tag)},decrypt:function(a,b,d,e,f){var g=b.slice(0),h=m.bitArray,i=h.bitLength(g);return f=f||128,e=e||[],i>=f?(b=h.bitSlice(g,i-f),g=h.bitSlice(g,0,i-f)):(b=g,g=[]),a=m.mode.gcm.p(l,a,g,e,d,f),h.equal(a.tag,b)||c(new m.exception.corrupt("gcm: tag doesn't match")),a.data},Z:function(a,b){var c,d,e,f,g,h=m.bitArray.l;for(e=[0,0,0,0],f=b.slice(0),c=0;128>c;c++){for((d=0!==(a[Math.floor(c/32)]&1<<31-c%32))&&(e=h(e,f)),g=0!==(1&f[3]),d=3;d>0;d--)f[d]=f[d]>>>1|(1&f[d-1])<<31;f[0]>>>=1,g&&(f[0]^=-520093696)}return e},g:function(a,b,c){var d,e=c.length;for(b=b.slice(0),d=0;e>d;d+=4)b[0]^=4294967295&c[d],b[1]^=4294967295&c[d+1],b[2]^=4294967295&c[d+2],b[3]^=4294967295&c[d+3],b=m.mode.gcm.Z(b,a);return b},p:function(a,b,c,d,e,f){var g,h,i,j,k,l,n,o,p=m.bitArray;for(l=c.length,n=p.bitLength(c),o=p.bitLength(d),h=p.bitLength(e),g=b.encrypt([0,0,0,0]),96===h?(e=e.slice(0),e=p.concat(e,[1])):(e=m.mode.gcm.g(g,[0,0,0,0],e),e=m.mode.gcm.g(g,e,[0,0,Math.floor(h/4294967296),4294967295&h])),h=m.mode.gcm.g(g,[0,0,0,0],d),k=e.slice(0),d=h.slice(0),a||(d=m.mode.gcm.g(g,h,c)),j=0;l>j;j+=4)k[3]++,i=b.encrypt(k),c[j]^=i[0],c[j+1]^=i[1],c[j+2]^=i[2],c[j+3]^=i[3];return c=p.clamp(c,n),a&&(d=m.mode.gcm.g(g,h,c)),a=[Math.floor(o/4294967296),4294967295&o,Math.floor(n/4294967296),4294967295&n],d=m.mode.gcm.g(g,d,a),i=b.encrypt(e),d[0]^=i[0],d[1]^=i[1],d[2]^=i[2],d[3]^=i[3],{tag:p.bitSlice(d,0,f),data:c}}},m.misc.hmac=function(a,b){this.M=b=b||m.hash.sha256;var c,d=[[],[]],e=b.prototype.blockSize/32;for(this.n=[new b,new b],a.length>e&&(a=b.hash(a)),c=0;e>c;c++)d[0][c]=909522486^a[c],d[1][c]=1549556828^a[c];this.n[0].update(d[0]),this.n[1].update(d[1]),this.G=new b(this.n[0])},m.misc.hmac.prototype.encrypt=m.misc.hmac.prototype.mac=function(a){return this.Q&&c(new m.exception.invalid("encrypt on already updated hmac called!")),this.update(a),this.digest(a)},m.misc.hmac.prototype.reset=function(){this.G=new this.M(this.n[0]),this.Q=l},m.misc.hmac.prototype.update=function(a){this.Q=!0,this.G.update(a)},m.misc.hmac.prototype.digest=function(){var a=this.G.finalize(),a=new this.M(this.n[1]).update(a).finalize();return this.reset(),a},m.misc.pbkdf2=function(a,b,d,e,f){d=d||1e3,(0>e||0>d)&&c(m.exception.invalid("invalid params to pbkdf2")),"string"==typeof a&&(a=m.codec.utf8String.toBits(a)),"string"==typeof b&&(b=m.codec.utf8String.toBits(b)),f=f||m.misc.hmac,a=new f(a);var g,h,i,j,k=[],l=m.bitArray;for(j=1;32*k.length<(e||1);j++){for(f=g=a.encrypt(l.concat(b,[j])),h=1;d>h;h++)for(g=a.encrypt(g),i=0;i<g.length;i++)f[i]^=g[i];k=k.concat(f)}return e&&(k=l.clamp(k,e)),k},m.prng=function(a){this.c=[new m.hash.sha256],this.i=[0],this.F=0,this.s={},this.C=0,this.K={},this.O=this.d=this.j=this.W=0,this.b=[0,0,0,0,0,0,0,0],this.f=[0,0,0,0],this.A=k,this.B=a,this.q=l,this.w={progress:{},seeded:{}},this.m=this.V=0,this.t=1,this.u=2,this.S=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.T=3e4,this.R=80},m.prng.prototype={randomWords:function(a,b){var d,e=[];d=this.isReady(b);var f;if(d===this.m&&c(new m.exception.notReady("generator isn't seeded")),d&this.u){d=!(d&this.t),f=[];var g,j=0;for(this.O=f[0]=(new Date).valueOf()+this.T,g=0;16>g;g++)f.push(4294967296*Math.random()|0);for(g=0;g<this.c.length&&(f=f.concat(this.c[g].finalize()),j+=this.i[g],this.i[g]=0,!(!d&&this.F&1<<g));g++);for(this.F>=1<<this.c.length&&(this.c.push(new m.hash.sha256),this.i.push(0)),this.d-=j,j>this.j&&(this.j=j),this.F++,this.b=m.hash.sha256.hash(this.b.concat(f)),this.A=new m.cipher.aes(this.b),d=0;4>d&&(this.f[d]=this.f[d]+1|0,!this.f[d]);d++);}for(d=0;a>d;d+=4)0===(d+1)%this.S&&h(this),f=i(this),e.push(f[0],f[1],f[2],f[3]);return h(this),e.slice(0,a)},setDefaultParanoia:function(a,b){0===a&&"Setting paranoia=0 will ruin your security; use it only for testing"!==b&&c("Setting paranoia=0 will ruin your security; use it only for testing"),this.B=a},addEntropy:function(a,b,d){d=d||"user";var e,g,h=(new Date).valueOf(),i=this.s[d],j=this.isReady(),l=0;switch(e=this.K[d],e===k&&(e=this.K[d]=this.W++),i===k&&(i=this.s[d]=0),this.s[d]=(this.s[d]+1)%this.c.length,typeof a){case"number":b===k&&(b=1),this.c[i].update([e,this.C++,1,b,h,1,0|a]);break;case"object":if(d=Object.prototype.toString.call(a),"[object Uint32Array]"===d){for(g=[],d=0;d<a.length;d++)g.push(a[d]);a=g}else for("[object Array]"!==d&&(l=1),d=0;d<a.length&&!l;d++)"number"!=typeof a[d]&&(l=1);if(!l){if(b===k)for(d=b=0;d<a.length;d++)for(g=a[d];g>0;)b++,g>>>=1;this.c[i].update([e,this.C++,2,b,h,a.length].concat(a))}break;case"string":b===k&&(b=a.length),this.c[i].update([e,this.C++,3,b,h,a.length]),this.c[i].update(a);break;default:l=1}l&&c(new m.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.i[i]+=b,this.d+=b,j===this.m&&(this.isReady()!==this.m&&f("seeded",Math.max(this.j,this.d)),f("progress",this.getProgress()))},isReady:function(a){return a=this.I[a!==k?a:this.B],this.j&&this.j>=a?this.i[0]>this.R&&(new Date).valueOf()>this.O?this.u|this.t:this.t:this.d>=a?this.u|this.m:this.m},getProgress:function(a){return a=this.I[a?a:this.B],this.j>=a?1:this.d>a?1:this.d/a},startCollectors:function(){this.q||(this.a={loadTimeCollector:j(this,this.aa),mouseCollector:j(this,this.ba),keyboardCollector:j(this,this.$),accelerometerCollector:j(this,this.U)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,l),window.addEventListener("mousemove",this.a.mouseCollector,l),window.addEventListener("keypress",this.a.keyboardCollector,l),window.addEventListener("devicemotion",this.a.accelerometerCollector,l)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):c(new m.exception.bug("can't attach event")),this.q=!0)},stopCollectors:function(){this.q&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,l),window.removeEventListener("mousemove",this.a.mouseCollector,l),window.removeEventListener("keypress",this.a.keyboardCollector,l),window.removeEventListener("devicemotion",this.a.accelerometerCollector,l)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.q=l)},addEventListener:function(a,b){this.w[a][this.V++]=b},removeEventListener:function(a,b){var c,d,e=this.w[a],f=[];for(d in e)e.hasOwnProperty(d)&&e[d]===b&&f.push(d);for(c=0;c<f.length;c++)d=f[c],delete e[d]},$:function(){g(1)},ba:function(a){m.random.addEntropy([a.x||a.clientX||a.offsetX||0,a.y||a.clientY||a.offsetY||0],2,"mouse"),g(0)},aa:function(){g(2)},U:function(a){if(a=a.accelerationIncludingGravity.x||a.accelerationIncludingGravity.y||a.accelerationIncludingGravity.z,window.orientation){var b=window.orientation;"number"==typeof b&&m.random.addEntropy(b,1,"accelerometer")}a&&m.random.addEntropy(a,2,"accelerometer"),g(0)}},m.random=new m.prng(6);a:try{var n,o,p,q;if(q="undefined"!=typeof b){var r;if(r=b.exports){var s;try{s=a("crypto")}catch(t){s=null}r=(o=s)&&o.randomBytes}q=r}if(q)n=o.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),m.random.addEntropy(n,1024,"crypto['randomBytes']");else if(window&&Uint32Array){if(p=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(p);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break a;window.msCrypto.getRandomValues(p)}m.random.addEntropy(p,1024,"crypto['getRandomValues']")}}catch(u){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(u))}m.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Y:function(a,b,d,e){d=d||{},e=e||{};var f,g=m.json,h=g.e({iv:m.random.randomWords(4,0)},g.defaults);return g.e(h,d),d=h.adata,"string"==typeof h.salt&&(h.salt=m.codec.base64.toBits(h.salt)),"string"==typeof h.iv&&(h.iv=m.codec.base64.toBits(h.iv)),(!m.mode[h.mode]||!m.cipher[h.cipher]||"string"==typeof a&&100>=h.iter||64!==h.ts&&96!==h.ts&&128!==h.ts||128!==h.ks&&192!==h.ks&&256!==h.ks||2>h.iv.length||4<h.iv.length)&&c(new m.exception.invalid("json encrypt: invalid parameters")),"string"==typeof a?(f=m.misc.cachedPbkdf2(a,h),a=f.key.slice(0,h.ks/32),h.salt=f.salt):m.ecc&&a instanceof m.ecc.elGamal.publicKey&&(f=a.kem(),h.kemtag=f.tag,a=f.key.slice(0,h.ks/32)),"string"==typeof b&&(b=m.codec.utf8String.toBits(b)),"string"==typeof d&&(d=m.codec.utf8String.toBits(d)),f=new m.cipher[h.cipher](a),g.e(e,h),e.key=a,h.ct=m.mode[h.mode].encrypt(f,b,h.iv,d,h.ts),h},encrypt:function(){var a=m.json,b=a.Y.apply(a,arguments);return a.encode(b)},X:function(a,b,d,e){d=d||{},e=e||{};var f=m.json;b=f.e(f.e(f.e({},f.defaults),b),d,!0);var g;return d=b.adata,"string"==typeof b.salt&&(b.salt=m.codec.base64.toBits(b.salt)),"string"==typeof b.iv&&(b.iv=m.codec.base64.toBits(b.iv)),(!m.mode[b.mode]||!m.cipher[b.cipher]||"string"==typeof a&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&256!==b.ks||!b.iv||2>b.iv.length||4<b.iv.length)&&c(new m.exception.invalid("json decrypt: invalid parameters")),"string"==typeof a?(g=m.misc.cachedPbkdf2(a,b),a=g.key.slice(0,b.ks/32),b.salt=g.salt):m.ecc&&a instanceof m.ecc.elGamal.secretKey&&(a=a.unkem(m.codec.base64.toBits(b.kemtag)).slice(0,b.ks/32)),"string"==typeof d&&(d=m.codec.utf8String.toBits(d)),g=new m.cipher[b.cipher](a),d=m.mode[b.mode].decrypt(g,b.ct,b.iv,d,b.ts),f.e(e,b),e.key=a,m.codec.utf8String.fromBits(d)},decrypt:function(a,b,c,d){var e=m.json;return e.X(a,e.decode(b),c,d)},encode:function(a){var b,d="{",e="";for(b in a)if(a.hasOwnProperty(b))switch(b.match(/^[a-z0-9]+$/i)||c(new m.exception.invalid("json encode: invalid property name")),d+=e+'"'+b+'":',e=",",typeof a[b]){case"number":case"boolean":d+=a[b];break;case"string":d+='"'+escape(a[b])+'"';break;case"object":d+='"'+m.codec.base64.fromBits(a[b],0)+'"';break;default:c(new m.exception.bug("json encode: unsupported type"))}return d+"}"},decode:function(a){a=a.replace(/\s/g,""),a.match(/^\{.*\}$/)||c(new m.exception.invalid("json decode: this isn't json!")),a=a.replace(/^\{|\}$/g,"").split(/,/);var b,d,e={};for(b=0;b<a.length;b++)(d=a[b].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i))||c(new m.exception.invalid("json decode: this isn't json!")),e[d[2]]=d[3]?parseInt(d[3],10):d[2].match(/^(ct|salt|iv)$/)?m.codec.base64.toBits(d[4]):unescape(d[4]);return e},e:function(a,b,d){if(a===k&&(a={}),b===k)return a;for(var e in b)b.hasOwnProperty(e)&&(d&&a[e]!==k&&a[e]!==b[e]&&c(new m.exception.invalid("required parameter overridden")),a[e]=b[e]);return a},ea:function(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&a[c]!==b[c]&&(d[c]=a[c]);return d},da:function(a,b){var c,d={};for(c=0;c<b.length;c++)a[b[c]]!==k&&(d[b[c]]=a[b[c]]);return d}},m.encrypt=m.json.encrypt,m.decrypt=m.json.decrypt,m.misc.ca={},m.misc.cachedPbkdf2=function(a,b){var c,d=m.misc.ca;return b=b||{},c=b.iter||1e3,d=d[a]=d[a]||{},c=d[c]=d[c]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):m.random.randomWords(2,0)},d=b.salt===k?c.firstSalt:b.salt,c[d]=c[d]||m.misc.pbkdf2(a,d,b.iter),{key:c[d].slice(0),salt:d.slice(0)}}},{crypto:5}],12:[function(a,b){var c=a("react"),d=(a("underscore"),a("../models/board.js")),e=a("./grid_view.jsx"),f=a("./intersections_view.jsx"),g=c.createClass({displayName:"BoardView",propTypes:{onIntersectionClick:c.PropTypes.func.isRequired,board:c.PropTypes.instanceOf(d).isRequired,current_turn:c.PropTypes.number},render:function(){var a=this.props.board.board_size;return c.DOM.div({className:"tesuji-board"},e({board_size:a}),f({board:this.props.board,current_turn:this.props.current_turn,onIntersectionClick:this.props.onIntersectionClick}))}});b.exports=g},{"../models/board.js":21,"./grid_view.jsx":13,"./intersections_view.jsx":15,react:"M6d2gk",underscore:"ZKusGn"}],13:[function(a,b){"use strict";var c=a("react"),d=a("underscore"),e=c.createClass({displayName:"GridView",propTypes:{board_size:c.PropTypes.number.isRequired},render:function(){var a=this.props.board_size;return c.DOM.div({className:"tesuji-grid"},c.DOM.table(null,c.DOM.tbody(null,d.times(a-1,function(b){return c.DOM.tr({key:b},d.times(a-1,function(a){return c.DOM.td({key:a}," ")}))}))),d.times(a,function(a){var b="ABCDEFGHJKLMNOPQRST".charAt(a);return c.DOM.div({className:"label label-top-"+a,key:a},b)}),d.times(a,function(a){var b="ABCDEFGHJKLMNOPQRST".charAt(a);return c.DOM.div({className:"label label-bottom-"+a,key:a},b)}),d.times(a,function(a){return c.DOM.div({className:"label label-left-"+a,key:a},a+1)}),d.times(a,function(a){return c.DOM.div({className:"label label-right-"+a,key:a},a+1)}),d.times(9,function(a){var b=3+6*(a%3),d=3+2*(a-a%3);return c.DOM.div({className:"dot intersection-"+b+"-"+d,key:a})}))}});b.exports=e},{react:"M6d2gk",underscore:"ZKusGn"}],14:[function(a,b){"use strict";var c=a("react"),d=(a("../models/stone.js"),a("./stone_view.jsx")),e=c.createClass({displayName:"IntersectionView",onMouseEnter:function(a){this.props.onMouseEnter({x:this.props.x,y:this.props.y},a)},render:function(){var a=[];return this.props.stone?a.push(d({stone:this.props.stone,key:"stone"})):this.props.preview&&a.push(c.DOM.div({className:"stone preview "+this.props.preview,key:"preview"})),c.DOM.div({className:"intersection intersection-"+this.props.x+"-"+this.props.y,onMouseEnter:this.onMouseEnter},a)}});b.exports=e},{"../models/stone.js":24,"./stone_view.jsx":16,react:"M6d2gk"}],15:[function(a,b){"use strict";var c=a("react"),d=a("underscore"),e=a("../models/stone.js"),f=a("./intersection_view.jsx"),g=c.createClass({displayName:"IntersectionsView",getInitialState:function(){return{cursor_position:{x:7,y:8}}},onClick:function(a){this.props.onIntersectionClick({x:this.state.cursor_position.x,y:this.state.cursor_position.y},a)},onIntersectionEnter:function(a){this.setState({cursor_position:{x:a.x,y:a.y}})},render:function(){var a=19;return c.DOM.div({className:"intersections",onClick:this.onClick},d.times(a*a,function(b){var c=b%a,d=(b-c)/a,g=this.props.board.stoneAt(c,d),h=this.state.cursor_position.x===c&&this.state.cursor_position.y===d?this.props.current_turn===e.BLACK?"black":"white":void 0;return f({x:c,y:d,key:b,onMouseEnter:this.onIntersectionEnter,stone:g,preview:h})}.bind(this)))}});b.exports=g},{"../models/stone.js":24,"./intersection_view.jsx":14,react:"M6d2gk",underscore:"ZKusGn"}],16:[function(a,b){var c=a("react"),d=(a("underscore"),a("../models/stone.js")),e=c.createClass({displayName:"StoneView",propTypes:{stone:c.PropTypes.instanceOf(d).isRequired},color:function(){return this.props.stone.color===d.BLACK?"black":this.props.stone.color===d.WHITE?"white":void 0},render:function(){return c.DOM.div(null,c.DOM.div({className:"stone "+this.color()}),c.DOM.div({className:"stone shadow"}))}});b.exports=e},{"../models/stone.js":24,react:"M6d2gk",underscore:"ZKusGn"}],uovHxG:[function(a,b){"use strict";var c=a("react"),d=a("underscore"),e=a("lz-string"),f=(a("sjcl"),a("../models/board.js"),a("../models/stone.js")),g=a("../models/game.js"),h=a("./board_view.jsx"),i=c.createClass({displayName:"TesujiApp",handleClick:function(a){if(a){var b=a.x,c=a.y;if(void 0!==b&&void 0!==c){var h=new g(d.defaults({moves:this.props.game.moves.concat(new f({x:b,y:c,color:this.props.game.current_turn})),current_turn:(this.props.game.current_turn+1)%2,previous_game_hash:this.props.game.hash()}),this.props.game);h.valid()&&(window.location.href="#/game/"+e.compressToBase64(JSON.stringify(h)))}}},render:function(){return c.DOM.div(null,h({board:this.props.game.board(),current_turn:this.props.game.current_turn,onIntersectionClick:this.handleClick}),c.DOM.div(null,this.props.game.serialize()),c.DOM.div(null,e.compressToBase64(this.props.game.serialize())),c.DOM.div(null,this.props.game.hash()))}});b.exports=i},{"../models/board.js":21,"../models/game.js":"FA0ZaN","../models/stone.js":24,"./board_view.jsx":12,"lz-string":10,react:"M6d2gk",sjcl:11,underscore:"ZKusGn"}],tesuji_app:[function(a,b){b.exports=a("uovHxG")},{}],19:[function(a,b){var c=a("underscore"),d=a("sjcl"),e=function(){};e.isModel=function(a){return"object"==typeof a&&"function"==typeof a.serialize},e.prototype.initialize=function(a){return a},e.prototype.serialize=function(){var a=function(a){return Array.isArray(a)?b(a):e.isModel(a)?a.serialize():JSON.stringify(a)},b=function(b){return"["+b.map(function(b){return a(b)}).join(",")+"]"},c=this;return"{"+this.attributes.map(function(b){return'"'+b+'":'+a(c[b])}).join(",")+"}"},e.prototype.hash=function(){return d.codec.base64.fromBits(d.hash.sha256.hash(this.serialize()))},e.extend=function(a){var b=this,d=function(b){c.extend(this,this.initialize(c.defaults(void 0!==b?b:{},a.defaults)))};return c.extend(d,b,a.constants),d.prototype=c.extend(Object.create(b.prototype),a.methods,{attributes:a.attributes}),d},b.exports=e},{sjcl:11,underscore:"ZKusGn"}],20:[function(a,b){var c=a("underscore"),d=a("../models/stone.js"),e=(a("../models/board.js"),function(a){this.message=a,this.name="InvalidMoveException"}),f={playMove:function(a,b){var c=a.slice(-1)[0];if(c.stoneAt(b.x,b.y))throw new e("stone already at ("+b.x+", "+b.y+")");var f=new d(b),g=c.placeStones(f),h=g.findKills(f);if(g=g.removeStones(h),this.checkSuicide(g,f))throw new e("stone placed in suicide");if(h&&h.length>0&&this.checkKo(a,g))throw new e("move violates rule of ko");return g},checkSuicide:function(a,b){return a.findDeadStones(b).length>0},checkKo:function(a,b){return a.some(function(a){return b.stones.length===a.stones.length&&c.isEqual(a.getOverlay(),b.getOverlay())})}};b.exports=f},{"../models/board.js":21,"../models/stone.js":24,underscore:"ZKusGn"}],21:[function(a,b){var c=a("underscore"),d=a("../lib/model.js"),e=d.extend({attributes:["board_size","stones"],methods:{initialize:function(a){return c.defaults(a,{board_size:19,stones:[]})},_coordinatesToIndex:function(a,b){return a+this.board_size*b},coordinatesOutOfBounds:function(a,b){return 0>a||a>=this.board_size||0>b||b>=this.board_size},stoneAt:function(a,b){return this.coordinatesOutOfBounds(a,b)?void 0:c.first(c.where(this.stones,{x:a,y:b}))||null},neighbors:function(a){return[this.stoneAt(a.x-1,a.y),this.stoneAt(a.x,a.y+1),this.stoneAt(a.x+1,a.y),this.stoneAt(a.x,a.y-1)]},getOverlay:function(a){var b=void 0!==a?a:this.stones;return c.object(b.map(function(a){return a.x+this.board_size*a.y}.bind(this)),b)},placeStones:function(){args=c.flatten(arguments);var a=c.filter(args,function(a){return!this.coordinatesOutOfBounds(a.x,a.y)&&!this.stoneAt(a.x,a.y)}.bind(this));return 0===a.length?null:new e({board_size:this.board_size,stones:this.stones.concat(a)})},removeStones:function(){args=c.flatten(arguments);var a=c.filter(args,function(a){return!this.coordinatesOutOfBounds(a.x,a.y)&&a===this.stoneAt(a.x,a.y)}.bind(this));return 0===a.length?this:new e({board_size:this.board_size,stones:c.values(c.omit(this.getOverlay(),c.keys(this.getOverlay(a))))})},findKills:function(a){return c.reduce(this.neighbors(a).filter(function(b){return b&&a.color!==b.color}),function(a,b){return c.contains(a,b)?a:a.concat(this.findDeadStones(b))}.bind(this),[])},findDeadStones:function(a){return function b(a,d,e){if(0===d.length)return e;var f=d[0],g=a.neighbors(f);return g.indexOf(null)>=0?[]:b(a,d.slice(1).concat(g.filter(function(a){return a&&f.color===a.color&&!c.contains(e,a)})),e.concat(f))}(this,[a],[])}}});b.exports=e},{"../lib/model.js":19,underscore:"ZKusGn"}],game:[function(a,b){b.exports=a("FA0ZaN")},{}],FA0ZaN:[function(a,b){var c=(a("underscore"),a("../lib/model.js")),d=a("../lib/rules.js"),e=a("./board.js"),f=a("./stone.js"),g=c.extend({attributes:["moves","handicap","komi","black_player","white_player","current_turn","previous_game_hash"],defaults:{moves:[],handicap:0,current_turn:f.BLACK},methods:{initialize:function(a){return a.moves.length>0&&(a.moves=a.moves.map(function(a){return new f(a)})),a},board:function(){return function a(b,c){if(0===c.length)return b.slice(-1)[0];var e=d.playMove(b,c[0]);return a(b.concat(e),c.slice(1))}([new e],this.moves)},valid:function(){try{return this.board(),!0}catch(a){return!1}}}});b.exports=g},{"../lib/model.js":19,"../lib/rules.js":20,"./board.js":21,"./stone.js":24,underscore:"ZKusGn"}],24:[function(a,b){var c=(a("underscore"),a("../lib/model.js")),d=c.extend({attributes:["x","y","color"],constants:{BLACK:0,WHITE:1}});b.exports=d},{"../lib/model.js":19,underscore:"ZKusGn"}]},{},["uovHxG"]);var React=require("react"),TesujiApp=require("tesuji_app"),Router=require("director").Router,lz=require("lz-string"),Game=require("game"),routes={"/game":function(){React.renderComponent(TesujiApp({game:new Game}),document.getElementById("tesuji_app"))},"/game/.*":function(){var a;try{a=JSON.parse(lz.decompressFromBase64(window.location.hash.slice(7)))}catch(b){try{a=JSON.parse(atob(window.location.hash.slice(7)))}catch(c){console.log("inavlid game data: "+b)}}var d=a?new Game(a):new Game;React.renderComponent(TesujiApp({game:d}),document.getElementById("tesuji_app"))},"/errp":function(){console.log("derrp")}},router=new Router(routes);router.init();